{% extends 'base.html' %}

{% block title %}
  پکیچ ها
{% endblock %}

{% load crispy_forms_tags %}
{% block content %}
  <section>
    <div class="collection-wrapper">
      <div class="container">
        <div class="row">
          <div class="col-lg-1 col-sm-2 col-xs-12">
            <div class="row">
              <div class="col-12 p-0">
                <div class="slider-right-nav slick-initialized slick-slider slick-vertical">
                  <div class="slick-list draggable" style="height: 306px;">
                    <div class="slick-track" style="opacity: 1; height: 1122px; transform: translate3d(0px, 306px, 0px);">
                      <div class="slick-slide slick-cloned" data-slick-index="-3" aria-hidden="true" tabindex="-1" style="width: 95px;">
                        <div>
                          <div style="width: 100%; display: inline-block;">
                            <img src="{{ package.image.url }}" alt="" class="img-fluid blur-up lazyloaded" />
                          </div>
                        </div>
                      </div>
                      <div class="slick-slide slick-cloned" data-slick-index="-2" aria-hidden="true" tabindex="-1" style="width: 95px;">
                        <div>
                          <div style="width: 100%; display: inline-block;">
                            <img src="{{ package.image.url }}" alt="" class="img-fluid blur-up lazyloaded" />
                          </div>
                        </div>
                      </div>
                      <div class="slick-slide slick-cloned" data-slick-index="-1" aria-hidden="true" tabindex="-1" style="width: 95px;">
                        <div>
                          <div style="width: 100%; display: inline-block;">
                            <img src="{{ package.image.url }}" alt="" class="img-fluid blur-up lazyloaded" />
                          </div>
                        </div>
                      </div>
                      <div class="slick-slide slick-current slick-active" data-slick-index="0" aria-hidden="false" style="width: 95px;">
                        <div>
                          <div style="width: 100%; display: inline-block;">
                            <img src="{{ package.image.url }}" alt="" class="img-fluid blur-up lazyloaded" />
                          </div>
                        </div>
                      </div>
                      <div class="slick-slide slick-active" data-slick-index="1" aria-hidden="false" style="width: 95px;">
                        <div>
                          <div style="width: 100%; display: inline-block;">
                            <img src="{{ package.image.url }}" alt="" class="img-fluid blur-up lazyloaded" />
                          </div>
                        </div>
                      </div>
                      <div class="slick-slide slick-active" data-slick-index="2" aria-hidden="false" style="width: 95px;">
                        <div>
                          <div style="width: 100%; display: inline-block;">
                            <img src="{{ package.image.url }}" alt="" class="img-fluid blur-up lazyloaded" />
                          </div>
                        </div>
                      </div>
                      <div class="slick-slide" data-slick-index="3" aria-hidden="true" tabindex="-1" style="width: 95px;">
                        <div>
                          <div style="width: 100%; display: inline-block;">
                            <img src="{{ package.image.url }}" alt="" class="img-fluid blur-up lazyloaded" />
                          </div>
                        </div>
                      </div>
                      <div class="slick-slide slick-cloned" data-slick-index="4" aria-hidden="true" tabindex="-1" style="width: 95px;">
                        <div>
                          <div style="width: 100%; display: inline-block;">
                            <img src="{{ package.image.url }}" alt="" class="img-fluid blur-up lazyloaded" />
                          </div>
                        </div>
                      </div>
                      <div class="slick-slide slick-cloned" data-slick-index="5" aria-hidden="true" tabindex="-1" style="width: 95px;">
                        <div>
                          <div style="width: 100%; display: inline-block;">
                            <img src="{{ package.image.url }}" alt="" class="img-fluid blur-up lazyloaded" />
                          </div>
                        </div>
                      </div>
                      <div class="slick-slide slick-cloned" data-slick-index="6" aria-hidden="true" tabindex="-1" style="width: 95px;">
                        <div>
                          <div style="width: 100%; display: inline-block;">
                            <img src="{{ package.image.url }}" alt="" class="img-fluid blur-up lazyloaded" />
                          </div>
                        </div>
                      </div>
                      <div class="slick-slide slick-cloned" data-slick-index="7" aria-hidden="true" tabindex="-1" style="width: 95px;">
                        <div>
                          <div style="width: 100%; display: inline-block;">
                            <img src="{{ package.image.url }}" alt="" class="img-fluid blur-up lazyloaded" />
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-4">
            <div class="product-right product-description-box">
              <h2>{{ package.name }}</h2>
              <div class="border-product">
                <h6 class="product-title">{{ package.business }}</h6>
                <p>
                  {{ package.desc|slice:':250' }}
                  {% if package.desc|length > 25 %}...{% endif %}
                </p>
              </div>

              <div class="border-product">
                <h6 class="product-title">آن را به اشتراک بگذارید</h6>
                <div class="product-icon">
                  <ul class="product-social">
                    <li>
                      <a href="#"><i class="fa fa-facebook-f"></i></a>
                    </li>
                    <li>
                      <a href="#"><i class="fa fa-google-plus"></i></a>
                    </li>
                    <li>
                      <a href="#"><i class="fa fa-twitter"></i></a>
                    </li>
                    <li>
                      <a href="#"><i class="fa fa-instagram"></i></a>
                    </li>
                    <li>
                      <a href="#"><i class="fa fa-rss"></i></a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-2"></div>
          <div class="col-lg-4 text-left">
            <div class="product-right product-form-box">
              {% comment %} <h4><del>1459.00</del><span>تخفیف</span></h4> {% endcomment %}
              <h3>{{ package.total_price }} تومان</h3>
              <div id="selectSize" class="addeffect-section product-description border-product"></div>
              <div class="product-buttons">
                <a href="javascript:void(0)" id="cartEffect" class="btn btn-solid hover-solid btn-animation">اضافه کردن به سبد</a> <a href="#" class="btn btn-solid">علاقه مندی</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="tab-product m-0">
    <div class="container">
      <div class="row">
        <div class="col-sm-12 col-lg-12">
          <ul class="nav nav-tabs nav-material" id="top-tab" role="tablist">
            <li class="nav-item">
              <a class="nav-link active" id="top-home-tab" data-bs-toggle="tab" href="#top-home" role="tab" aria-selected="true"><i class="icofont icofont-ui-home"></i>جزئیات</a>
              <div class="material-border"></div>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="profile-top-tab" data-bs-toggle="tab" href="#top-profile" role="tab" aria-selected="false"><i class="icofont icofont-man-in-glasses"></i>مشخصات</a>
              <div class="material-border"></div>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="contact-top-tab" data-bs-toggle="tab" href="#top-contact" role="tab" aria-selected="false"><i class="icofont icofont-contacts"></i>ویدیو</a>
              <div class="material-border"></div>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="review-top-tab" data-bs-toggle="tab" href="#top-review" role="tab" aria-selected="true"><i class="icofont icofont-contacts"></i>نظر بنویسید</a>
              <div class="material-border"></div>
            </li>
            <li class="nav-item">
              <div class="material-border"></div>
            </li>
          </ul>
          <div class="tab-content nav-material" id="top-tabContent">
            <div class="tab-pane fade active show" id="top-home" role="tabpanel" aria-labelledby="top-home-tab">
              <div class="product-tab-discription">
                <div class="part">
                  <p>{{ package.desc }}</p>
                </div>
              </div>
            </div>
            <div class="tab-pane fade" id="top-profile" role="tabpanel" aria-labelledby="profile-top-tab">
              <div class="single-product-tables">
                <div class="part">
                  <h5 class="inner-title">سرویس های ارائه شده:</h5>
                  {% for service in package.services.all %}
                    <p>{{ service.name }}</p> {# نمایش نام سرویس #}
                  {% empty %}
                    <p>هیچ سرویسی موجود نیست.</p>
                  {% endfor %}
                </div>
              </div>
            </div>

            <div class="tab-pane fade" id="top-contact" role="tabpanel" aria-labelledby="contact-top-tab">
              <div class="">
                <div class="tab-pane fade" id="top-contact" role="tabpanel" aria-labelledby="contact-top-tab">
                  <div class="package-media">
                    {% if package.media_files %}
                      <video controls>
                        <source src="{{ package.media_files.url }}" type="video/mp4" />مرورگر شما از این فرمت پشتیبانی نمی‌کند.
                      </video>
                    {% else %}
                      <p>هیچ ویدیوئی برای این پکیج وجود ندارد.</p>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>

            <div class="tab-pane fade" id="top-review" role="tabpanel" aria-labelledby="review-top-tab">
              {% for review in reviews %}
                <div>
                  <p>
                    <strong>{{ review.user }}</strong> - امتیاز: {{ review.rating }} ⭐
                  </p>
                  <p>{{ review.comment }}</p>
                  <hr />
                </div>
              {% empty %}
                <p>هنوز نظری ثبت نشده است.</p>
              {% endfor %}
              <form class="theme-form" method="post">
                <div class="form-row row">
                  <div class="col-md-6">
                    {% csrf_token %}
                    {{ form|crispy }}
                  </div>
                  <div class="col-md-12">
                    <button class="btn btn-solid" type="submit">نظر خود را ارسال کنید</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
{% endblock %}
